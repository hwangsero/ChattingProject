//apply plugin: 'org.asciidoctor.convert'
//processResources {
//    dependsOn "buildRestDoc"
//}
bootJar {
    dependsOn asciidoctor
    from ("${project.projectDir}/src/main/resources/templates/docs") {
        into 'BOOT-INF/classes/templates/docs'
    }
//    from ("${asciidoctor.outputDir}/html5") {
//        into 'static/docs'
//    }
    baseName "api"

}
//bootJar.doFirst {
//    dependsOn asciidoctor
//}
ext {
    set('snippetsDir', file("build/generated-snippets"))
}
//ext['spring-restdocs.version'] = '2.0.6.BUILD-SNAPSHOT'

dependencies {

    implementation 'com.github.gavlyukovskiy:p6spy-spring-boot-starter:1.5.6' // 쿼리 안의 파라미터를 확인하게 도와주는 외부 라이브러리
    implementation 'org.springframework.boot:spring-boot-starter-validation'
    testImplementation 'org.springframework.security:spring-security-test'
    compile('org.springframework.boot:spring-boot-starter-security')
    compile group: 'org.springframework.cloud', name: 'spring-cloud-aws', version: '2.2.1.RELEASE', ext: 'pom'

    // https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-aws
    compile group: 'org.springframework.cloud', name: 'spring-cloud-starter-aws', version: '2.2.1.RELEASE'



    //Swagger
    compile group: 'io.springfox', name: 'springfox-swagger-ui', version: '2.9.2'
    compile group: 'io.springfox', name: 'springfox-swagger2', version: '2.9.2'

}
test {
    outputs.dir snippetsDir
    useJUnitPlatform()
}

asciidoctor {
    dependsOn test
    inputs.dir snippetsDir
    separateOutputDirs = false
//    outputs.dir = "${project.projectDir}/resources/templates"
//    outputDir = file("$buildDir/site")
    outputDir = file("${project.projectDir}/src/main/resources/templates/docs")
//    println("--> ${outputDir}")
//    print('-asciidoctor after-')
}
//asciidoctor.doLast {
//    println("do lastttt")
//    copy {
//        from 'build/docs/html5'
//        into "${project.projectDir}/src/main/resources/templates/docs"
//        include 'index.html'
//    }
//}

